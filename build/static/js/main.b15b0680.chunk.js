(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{148:function(e,t,a){e.exports=a(207)},201:function(e,t){},205:function(e,t,a){},207:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(10),c=a.n(r),o=a(4),s=a(42),i=a(16),u=a(20),m=a(47),d=a(7),p=a.n(d),h=Object(n.createContext)(),g=function(e){var t=JSON.parse(localStorage.getItem("login")),a=Object(n.useState)(t||{displayName:"",type:"",status:!1}),r=Object(o.a)(a,2),c=r[0],s=r[1];return Object(n.useEffect)((function(){localStorage.setItem("login",JSON.stringify(c))}),[c]),l.a.createElement(h.Provider,{value:[c,s]},e.children)},f=a(94),E=a.n(f),b=a(93),v=a.n(b),y=a(254),O=a(253),j=a(73),k=a.n(j),C=function(e){var t=Object(n.useContext)(h),a=Object(o.a)(t,2),r=a[0],c=(a[1],p()("btn","btn-lg"),p()("d-inline-block","align-top")),s="/"+r.type+"/home/"+r.displayName,i="/"+r.type+"/userDetails",u="/"+r.type+"/merchantDetails";return console.log("userDetailsRoute: ",i),l.a.createElement(y.a,{expand:"lg",sticky:"top"},l.a.createElement(y.a.Brand,{href:s},l.a.createElement("img",{style:{float:"left"},src:k.a,width:"80",height:"60",className:c,alt:"CheckMeIn logo"}),l.a.createElement("h3",{style:{paddingTop:"2%"}},"Welcome ",r.displayName)),l.a.createElement(y.a.Collapse,{id:"basic-navbar-nav"},l.a.createElement(O.a,{className:"ml-auto"},l.a.createElement(O.a.Link,{href:s}," Home ",l.a.createElement(v.a,{style:{fill:"white"}})),"merchant"===r.type&&l.a.createElement(O.a.Link,{href:s}," Add Store Details"),"merchant"===r.type&&l.a.createElement(O.a.Link,{href:i}," In-Queue Customers"),"user"===r.type&&l.a.createElement(O.a.Link,{href:u}," Checked-In Merchants"),l.a.createElement(O.a.Link,{href:"/".concat(r.type,"/auth/logout"),onClick:e.clearSession},"Logout ",l.a.createElement(E.a,{style:{fill:"white"}})))))};var I=function(){var e=Object(n.useContext)(h),t=Object(o.a)(e,2),a=t[0],r=t[1],c=(p()("btn","btn-lg"),p()("navbar","navbar-expand-lg","navbar-dark"),p()("d-inline-block","align-top")),s="/home/"+a.displayName;return l.a.createElement("header",null,a.status?l.a.createElement(C,{clearSession:function(){r({displayName:"",type:"",status:!1}),sessionStorage.clear()}}):l.a.createElement(y.a,{expand:"lg",sticky:"top"},l.a.createElement(y.a.Brand,{href:s},l.a.createElement("img",{style:{float:"left"},src:k.a,width:"80",height:"60",className:c,alt:"CheckMeIn logo"}),l.a.createElement("h3",{style:{paddingTop:"2%"}},"Welcome to CheckMeIn"))))};var S=function(){var e=(new Date).getFullYear(),t=Object(n.useContext)(h),a=Object(o.a)(t,2),r=a[0],c=(a[1],"/user/home/"+r.username);return l.a.createElement(y.a,{style:{background:"none",height:"5vh",margin:"5% 0 0 0",padding:"1.5% 0 0.5% 0"},expand:"lg",sticky:"bottom"},l.a.createElement(O.a,{className:"ml-auto mr-auto"},l.a.createElement(y.a.Brand,{href:c},l.a.createElement("p",{style:{fontSize:"medium"},className:"footerComp"},"Copyright \u24d2 ",e))))},N=a(19),w=a.n(N),_=Object(n.createContext)(),x=function(e){var t=JSON.parse(sessionStorage.getItem("checkedInMerchants")),a=Object(n.useState)(t||[]),r=Object(o.a)(a,2),c=r[0],s=r[1];Object(n.useEffect)((function(){sessionStorage.setItem("checkedInMerchants",JSON.stringify(c))}),[c]);var i=Object(n.useMemo)((function(){return{checkedInMerchants:c,setCheckedInMerchants:s}}));return l.a.createElement(_.Provider,{value:i},e.children)},M=Object(n.createContext)(),T=function(e){var t=JSON.parse(localStorage.getItem("AllMerchants")),a=Object(n.useState)(t||[]),r=Object(o.a)(a,2),c=r[0],s=r[1];Object(n.useEffect)((function(){localStorage.setItem("AllMerchants",JSON.stringify(c))}),[c]);var i=Object(n.useMemo)((function(){return{allMerchants:c,setAllMerchants:s}}));return l.a.createElement(M.Provider,{value:i},e.children)},D=a(17),P=a(135),L=a(244),U=a(245),A=a(255),Q=a(248),q=["accounting","airport","amusement_park","aquarium","art_gallery","atm","bakery","bank","bar","beauty_salon","bicycle_store","book_store","bowling_alley","bus_station","cafe","campground","car_dealer","car_rental","car_repair","car_wash","casino","cemetery","church","city_hall","clothing_store","convenience_store","courthouse","dentist","department_store","doctor","drugstore","electrician","electronics_store","embassy","fire_station","florist","funeral_home","furniture_store","gas_station","gym","hair_care","hardware_store","hindu_temple","home_goods_store","hospital","insurance_agency","jewelry_store","laundry","lawyer","library","light_rail_station","liquor_store","local_government_office","locksmith","lodging","meal_delivery","meal_takeaway","mosque","movie_rental","movie_theater","moving_company","museum","night_club","painter","park","parking","pet_store","pharmacy","physiotherapist","plumber","police","post_office","primary_school","real_estate_agency","restaurant","roofing_contractor","rv_park","school","secondary_school","shoe_store","shopping_mall","spa","stadium","storage","store","subway_station","supermarket","synagogue","taxi_stand","tourist_attraction","train_station","transit_station","travel_agency","university","veterinary_care","zoo"],z=a(250),F=a(252),H=Object(n.createContext)(),R=function(e){var t=JSON.parse(sessionStorage.getItem("userSelection")),a=Object(n.useState)(t||[]),r=Object(o.a)(a,2),c=r[0],s=r[1];Object(n.useEffect)((function(){sessionStorage.setItem("userSelection",JSON.stringify(c))}),[c]);var i=Object(n.useMemo)((function(){return{userSelection:c,setUserSelection:s}}));return l.a.createElement(H.Provider,{value:i},e.children)},J=a(41),B=(a(112),a(82)),V=a.n(B),$=["places"],K={height:"80vh"},W={disableDefaultUI:!0,zoomControl:!0};function Z(){var e=Object(n.useState)({lat:33.0061,lng:-96.7026}),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(J.d)({googleMapsApiKey:"AIzaSyAF0dvTPaV4Nukgd5ImNRT9e8u0OmhIbdU",libraries:$}),s=c.isLoaded,i=c.loadError,u=Object(n.useContext)(M),m=(u.allMerchants,u.setAllMerchants,Object(n.useState)({lat:"",lng:"",time:""})),d=Object(o.a)(m,2),p=(d[0],d[1]),h=Object(n.useState)(),g=Object(o.a)(h,2),f=g[0],E=g[1],b=Object(n.useContext)(H),v=b.userSelection;b.setUserSelection;function y(e){var t=e.panTo;return l.a.createElement("button",{className:"locate",onClick:function(){navigator.geolocation.getCurrentPosition((function(e){t({lat:e.coords.latitude,lng:e.coords.longitude})}),(function(){return null}))}},l.a.createElement("img",{src:V.a,width:"60",height:"60",alt:"compass"}))}Object(n.useEffect)((function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){r({lat:e.coords.latitude,lng:e.coords.longitude})}))}),[]);var O=l.a.useCallback((function(e){console.log("map click :",e),p({lat:e.latLng.lat(),lng:e.latLng.lng(),time:new Date})}),[]),j=l.a.useRef(),k=l.a.useCallback((function(e){j.current=e}),[]),C=l.a.useCallback((function(e){var t=e.lat,a=e.lng;j.current.panTo({lat:t,lng:a}),j.current.setZoom(17)}),[]);if(i)return"Error";if(!s)return"Loading...";return l.a.createElement("div",{className:"findStores"},l.a.createElement(y,{panTo:C}),l.a.createElement(J.a,{id:"map",mapContainerStyle:K,zoom:10,center:a,options:W,onClick:O,onLoad:k},void 0!==f?l.a.createElement(J.b,{onCloseClick:function(){E(void 0)},position:{lat:f.lat,lng:f.lng}},l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement("b",null,f.companyName)),l.a.createElement("p",null,f.streetAddress),l.a.createElement("a",{href:f.url},"View on Google Maps"))):null,v.length>0?v.map((function(e){return l.a.createElement("div",null,l.a.createElement(J.c,{key:"".concat(e.lat,"-").concat(e.lng),onClick:function(t){return function(e,t){console.log("merchant clicked",e),E(void 0===f?e:void 0)}(e)},position:{lat:e.lat,lng:e.lng}}))})):null))}var Y=a(51),G=a(251);function X(e){var t=Object(n.useState)(e.merchant),a=Object(o.a)(t,2),r=(a[0],a[1]);return l.a.createElement("div",null,void 0!==e.merchant?l.a.createElement(G.a,{show:e.zoom,onHide:function(){e.handleClose(),r({})},backdrop:"static",keyboard:!1},l.a.createElement(G.a.Header,{closeButton:!0},l.a.createElement(G.a.Title,null,e.merchant.companyName,l.a.createElement("br",null),l.a.createElement("span",null,e.merchant.streetAddress))),l.a.createElement(G.a.Body,null,l.a.createElement("ul",null,l.a.createElement("li",null,"Limits on persons allowed at a time: ",e.merchant.limitOnPeople),l.a.createElement("li",null,"Number of users already in queue: ",e.merchant.numUsersInQueue),e.merchant.opHours.length>0?l.a.createElement("li",null," Operating Hours:",l.a.createElement("ul",{style:{paddingLeft:"5%"}},e.merchant.opHours.map((function(e){return l.a.createElement("li",null,e)})))):null,l.a.createElement("li",null,"Rating: ",e.merchant.rating.$numberDecimal),l.a.createElement("li",null,l.a.createElement("a",{href:e.merchant.website},"Check out Website")),l.a.createElement("li",null,l.a.createElement("a",{href:e.merchant.url},"Find on maps")),l.a.createElement("li",null,"Category: ",e.merchant.types[0])))):null)}var ee=a(131),te=a.n(ee);function ae(){var e,t=Object(n.useContext)(_),a=t.checkedInMerchants,r=t.setCheckedInMerchants,c=Object(n.useContext)(M),s=c.allMerchants,i=(c.setAllMerchants,Object(n.useContext)(H)),d=(i.userSelection,i.setUserSelection),p=Object(n.useState)("Search Categories"),h=Object(o.a)(p,2),g=h[0],f=h[1],E=Object(n.useState)(""),b=Object(o.a)(E,2),v=b[0],y=b[1],O=l.a.useState(80450),j=Object(o.a)(O,2),k=j[0],C=j[1],I=Object(n.useState)({lat:33.0061,lng:-96.7026}),S=Object(o.a)(I,2),N=(S[0],S[1]),x=Object(n.useState)(s),T=Object(o.a)(x,2),R=T[0],J=T[1],B=Object(n.useState)({placeId:"",position:0}),V=Object(o.a)(B,2),$=V[0],K=V[1],W=Object(n.useState)({placeId:"",position:0}),Y=Object(o.a)(W,2),G=Y[0],ee=Y[1],ae=Object(n.useState)(!1),ne=Object(o.a)(ae,2),le=ne[0],re=ne[1],ce=Object(n.useState)(),oe=Object(o.a)(ce,2),se=oe[0],ie=oe[1],ue=Object(n.useState)(),me=Object(o.a)(ue,2),de=me[0],pe=me[1];console.log("environment :","production"),console.log("google key:","AIzaSyAF0dvTPaV4Nukgd5ImNRT9e8u0OmhIbdU"),(e=te.a.connect()).on("connect",(function(){e.emit("room","checkInQueue")})),Object(n.useEffect)((function(){e.on("message",(function(e){console.log("Incoming message:",e),pe(e)}))}),[]),Object(n.useEffect)((function(){void 0!==a&&void 0!==de&&a.length>0&&(console.log("checked in merchants before: ",a),r((function(e){return e.map((function(e){return e.placeId===de.placeId&&(console.log("id matched"),de.position<e.position&&e.position>1)?(console.log("position less"),Object(m.a)(Object(m.a)({},e),{},Object(u.a)({},"position",e.position-1))):e}))})),console.log("checked in merchants after: ",a))}),[de]),Object(n.useEffect)((function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){N({lat:e.coords.latitude,lng:e.coords.longitude})}))}),[]),Object(n.useEffect)((function(){J(s)}),[s]),Object(n.useEffect)((function(){""!==g&&null!==g&&"Search Categories"!==g?(console.log("select category: ",g),J(s.filter((function(e){return e.types.includes(g)&&e.distanceFromCenter<=k}))),d(s.filter((function(e){return e.types.includes(g)&&e.distanceFromCenter<=k})))):(null!==g&&""!==g||f("Search Categories"),J(s.filter((function(e){return e.distanceFromCenter<=k}))),d([]))}),[g,k]);return l.a.createElement(L.a,{style:{marginLeft:"1%"}},l.a.createElement(X,{zoom:le,handleClose:function(){re(!1)},merchant:se}),l.a.createElement(U.a,{sm:8},l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),null===g||""===g?f("Search Categories"):d(s.filter((function(e){return e.types.includes(g)&&e.distanceFromCenter<=k}))),e.target.reset()}},l.a.createElement(L.a,{style:{paddingTop:"1%"}},l.a.createElement("h5",{style:{color:"white"}}," Search for types of places from the list below")),l.a.createElement(L.a,null,l.a.createElement(U.a,{sm:5,id:"categorySelector"},l.a.createElement(F.a,{value:g,onChange:function(e,t){f(t)},inputValue:v,onInputChange:function(e,t){y(t)},clearOnEscape:!0,clearOnBlur:!0,freeSolo:!0,id:"free-solo-demo1",label:"Merchant Categories...",options:q,style:{width:300},renderInput:function(e){return l.a.createElement(z.a,Object.assign({},e,{style:{background:"white"},variant:"outlined"}))}})),l.a.createElement(U.a,{sm:3,id:"milesSelector"},l.a.createElement("select",{id:"miles",name:"miles",onChange:function(e){console.log(e.target.value),""!==e.target.value?C(1609*e.target.value):C(80450)}},l.a.createElement("option",{value:"",selected:!0}," Within Radius (miles)"),l.a.createElement("option",{value:"5"},"5 miles"),l.a.createElement("option",{value:"10"},"10 miles"),l.a.createElement("option",{value:"20"},"20 miles"),l.a.createElement("option",{value:"50"},"50 miles")),l.a.createElement("button",{type:"submit"},"X")))),l.a.createElement(L.a,null,l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==$.placeId?(console.log("checkin value:",$),r((function(e){return[].concat(Object(D.a)(e),[Object(m.a)(Object(m.a)({},R.filter((function(e){return e.placeId===$.placeId}))[0]),{},{position:$.position})])})),w.a.post("/user/data/checkin",{checkIn:$}).then((function(e){console.log(e.data),K({placeId:"",position:0})})).catch((function(e){console.error(e)}))):""!==G.placedId&&(console.log("checkout value:",G),r((function(e){return e.filter((function(e){return e.placeId!==G.placeId}))})),w.a.post("/user/data/checkout",{checkOut:G}).then((function(e){console.log(e.data),ee({placeId:"",position:0})})).catch((function(e){console.error(e)}))),e.target.reset()}},l.a.createElement(L.a,{className:"merchantsDisplay",style:{margin:"0",padding:"0"}},R.length>0?R.map((function(e){return l.a.createElement("div",{className:"col-sm-3 merchantListing"},l.a.createElement(A.a,null,l.a.createElement(A.a.Header,null,e.companyName,l.a.createElement(P.a,{onClick:function(t){return function(e,t){ie(e),re(!0)}(e)}})),l.a.createElement(A.a.Body,null,a.length>0&&a.map((function(e){return e.placeId})).includes(e.placeId)?l.a.createElement("div",null,l.a.createElement("p",{style:{fontSize:"large",color:"green"}},"Checked In!"),l.a.createElement("p",null,l.a.createElement("b",null,"Position: # ",a.filter((function(t){return t.placeId===e.placeId}))[0].position,"/ Capacity: ",e.limitOnPeople)),l.a.createElement(Q.a,{size:"sm",type:"submit",onClick:function(t){return ee({placeId:e.placeId,position:a.filter((function(t){return t.placeId===e.placeId}))[0].position})},variant:"warning",name:"CheckOut",value:"checkout"},"Check out")):e.limitOnPeople>e.numUsersInQueue?l.a.createElement(A.a.Text,null,l.a.createElement("p",{style:{color:"green"}},"Available to check-in. ",l.a.createElement("br",null),l.a.createElement(Q.a,{size:"sm",type:"submit",onClick:function(t){return K({placeId:e.placeId,position:e.numUsersInQueue+1})},variant:"success",name:"CheckIn",value:"checkin"},"Check In"))):l.a.createElement(A.a.Text,null,l.a.createElement("p",{style:{color:"red"}},l.a.createElement("b",null,"Queue is full !"),"  ","  ",l.a.createElement(Q.a,{size:"sm",type:"submit",onClick:function(t){return K({placeId:e.placeId,position:e.numUsersInQueue+1})},variant:"danger",name:"CheckIn",value:"queue"},"Add to Queue"))),l.a.createElement(A.a.Text,null," ",l.a.createElement("p",null,"Address: ",e.streetAddress," "),"Contact: ",e.phone," ",l.a.createElement("a",{href:e.url},"Map Url")," "))))})):null)))),l.a.createElement(U.a,{sm:4},l.a.createElement(Z,{style:{marginRight:"1%"}})))}var ne=a(249);var le=function(e){e.match;var t=Object(i.e)();"#_=_"===window.location.hash&&(t.replaceState?t.replaceState(null,null,window.location.href.split("#")[0]):window.location.hash="");var a=Object(n.useContext)(_),r=(a.checkedInMerchants,a.setCheckedInMerchants),c=Object(n.useContext)(M),s=(c.allMerchants,c.setAllMerchants),d=Object(n.useState)({lat:33.0061,lng:-96.7026}),p=Object(o.a)(d,2),g=p[0],f=p[1],E=Object(n.useContext)(h),b=Object(o.a)(E,2),v=b[0];b[1],console.log(" user home page");var y=function(e){return e*Math.PI/180};return Object(n.useEffect)((function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){f({lat:e.coords.latitude,lng:e.coords.longitude})})),w.a.get("/user/auth/login/success",{withCredentials:!0}).then((function(e){e.data.success?(console.log("response: ",e.data),e.data.checkedInMerchants.length>0?r(e.data.checkedInMerchants):r([])):t.push("/")})).catch((function(e){console.log(e)})),w.a.get("/merchant/data/allMerchants",{withCredentials:!0}).then((function(e){console.log("resoponse from all merchants: ",e),e.data.response.length>0?s(e.data.response.map((function(e){var t;return Object(m.a)(Object(m.a)({},e),{},(t={},Object(u.a)(t,"lat",parseFloat(e.lat.$numberDecimal)),Object(u.a)(t,"lng",parseFloat(e.lng.$numberDecimal)),Object(u.a)(t,"distanceFromCenter",function(e,t){var a=y(t.lat-e.lat),n=y(t.lng-e.lng),l=Math.sin(a/2)*Math.sin(a/2)+Math.cos(y(e.lat))*Math.cos(y(t.lat))*Math.sin(n/2)*Math.sin(n/2);return 6378137*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))}({lat:parseFloat(e.lat.$numberDecimal),lng:parseFloat(e.lng.$numberDecimal)},g)),t))}))):s([])})).catch((function(e){console.log("error in fetching all merchants: ",e)}))}),[]),l.a.createElement("div",null,l.a.createElement(I,null),v.status&&l.a.createElement(ne.a,{fluid:!0,style:{paddingTop:"1%"}},l.a.createElement(ae,null)),l.a.createElement(S,null))},re=Object(n.createContext)(),ce=function(e){var t=JSON.parse(sessionStorage.getItem("usersInQueue")),a=Object(n.useState)(t||[]),r=Object(o.a)(a,2),c=r[0],s=r[1];Object(n.useEffect)((function(){sessionStorage.setItem("usersInQueue",JSON.stringify(c))}),[c]);var i=Object(n.useMemo)((function(){return{usersInQueue:c,setUsersInQueue:s}}));return l.a.createElement(re.Provider,{value:i},e.children)},oe=a(21),se=a.n(oe),ie=a(35),ue=a(64),me=a(57),de=function(e){console.log("called cards");var t=Object(n.useState)(0),a=Object(o.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(!1),i=Object(o.a)(s,2),u=i[0],m=i[1];return l.a.createElement("div",null,l.a.createElement(A.a,{style:{marginTop:"1%"}},l.a.createElement(A.a.Header,null," Please search on map & confirm your store details"),l.a.createElement(A.a.Body,null,l.a.createElement(A.a.Title,null," Name : ",e.storeDetails.name," "),l.a.createElement(A.a.Text,null," Address: ",e.storeDetails.address," "),l.a.createElement(A.a.Text,null," Days Open: "),e.storeDetails.opHours.map((function(e){return l.a.createElement(A.a.Text,null," ",e," ")})),l.a.createElement(A.a.Text,null," Rating: ",e.storeDetails.rating," "),l.a.createElement(A.a.Text,null," ",l.a.createElement("h6",null,"Please enter the limit of people allowed at a time in your establishment in order to maintain social distancing"),l.a.createElement("input",{type:"text",onChange:function(e){console.log("limit: ",e.target.value),c(e.target.value)},placeholder:"Enter Count",required:!0})),l.a.createElement(Q.a,{variant:"primary",onClick:function(){var t=e.storeDetails;t.limitOnPeople=r,w.a.post("/merchant/data/add",t).then((function(e){e.data.done?(console.log("response: ",e.data),m(!0)):(console.log("failed to add store"),m(!1))})).catch((function(e){console.error(e)}))}},"Confirm"),u?l.a.createElement("h3",null," Store Details saved successfully"):null)),l.a.createElement("br",null))},pe=["places"],he={height:"50vh",width:"50vw"},ge={disableDefaultUI:!0,zoomControl:!0};function fe(){var e=Object(n.useState)({lat:33.0061,lng:-96.7026}),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(J.d)({googleMapsApiKey:"AIzaSyAF0dvTPaV4Nukgd5ImNRT9e8u0OmhIbdU",libraries:pe}),s=c.isLoaded,i=c.loadError,u=Object(n.useState)({lat:"",lng:"",time:""}),m=Object(o.a)(u,2),d=m[0],p=m[1],h=Object(n.useState)({name:"",address:"",zip:"",placeId:"",icon:"",phone:"",types:[],opHours:[],rating:"",lat:"",lng:"",website:"",url:""}),g=Object(o.a)(h,2),f=g[0],E=g[1];function b(e){var t=e.panTo;return l.a.createElement("button",{className:"locate",onClick:function(){navigator.geolocation.getCurrentPosition((function(e){t({lat:e.coords.latitude,lng:e.coords.longitude})}),(function(){return null}))}},l.a.createElement("img",{src:V.a,width:"60",height:"60",alt:"compass"}))}function v(e){var t=e.panTo,n=Object(ue.a)({requestOptions:{location:{lat:function(){return a.lat},lng:function(){return a.lng}},radius:1e5}}),r=n.ready,c=n.value,o=n.suggestions,s=o.status,i=o.data,u=n.suggestions,m=n.setValue,d=n.clearSuggestions,p=function(){var e=Object(ie.a)(se.a.mark((function e(a){var n,l,r,c,o;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(a,!1),d(),e.prev=2,e.next=5,Object(ue.b)(u.data[0]);case 5:return n=e.sent,console.log("Details: ",n),e.next=9,Object(ue.c)({address:a});case 9:return l=e.sent,console.log("results: ",l[0]),e.next=13,Object(ue.d)(l[0]);case 13:r=e.sent,c=r.lat,o=r.lng,console.log("lat,lng :",c,",",o),E({name:n.name,address:n.formatted_address,zip:n.address_components[n.address_components.length-1].short_name,placeId:n.place_id,icon:n.icon,phone:n.formatted_phone_number,types:n.types,opHours:n.opening_hours.weekday_text,rating:n.rating,lat:c,lng:o,website:n.website,url:n.url}),console.log("storeDetails now: ",f),t({lat:c,lng:o}),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(2),console.log("\ud83d\ude31 Error: ",e.t0);case 25:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement("div",{className:"search"},l.a.createElement(me.a,{onSelect:p},l.a.createElement(me.b,{value:c,onChange:function(e){m(e.target.value)},disabled:!r,placeholder:"Search your location"}),l.a.createElement(me.e,null,l.a.createElement(me.c,null,"OK"===s&&i.map((function(e){var t=e.id,a=e.description;return l.a.createElement(me.d,{key:t,value:a})}))))))}Object(n.useEffect)((function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){r({lat:e.coords.latitude,lng:e.coords.longitude})}))}),[]);var y=l.a.useCallback((function(e){console.log("map click :",e),p({lat:e.latLng.lat(),lng:e.latLng.lng(),time:new Date})}),[]),O=l.a.useRef(),j=l.a.useCallback((function(e){O.current=e}),[]),k=l.a.useCallback((function(e){var t=e.lat,a=e.lng;O.current.panTo({lat:t,lng:a}),O.current.setZoom(17)}),[]);return i?"Error":s?l.a.createElement(ne.a,{fluid:!0,style:{paddingTop:"1%"}},l.a.createElement(L.a,null,l.a.createElement(U.a,null,l.a.createElement("div",{className:"addstoreMap"},l.a.createElement(ne.a,{fluid:!0},l.a.createElement(L.a,null,l.a.createElement(U.a,{sm:1},l.a.createElement(b,{panTo:k})),l.a.createElement(U.a,null,l.a.createElement(v,{panTo:k}))),l.a.createElement(L.a,null,l.a.createElement(J.a,{id:"map",mapContainerStyle:he,zoom:8,center:a,options:ge,onClick:y,onLoad:j},""!==d.lat?l.a.createElement(J.c,{key:"".concat(d.lat,"-").concat(d.lng),position:{lat:d.lat,lng:d.lng},onClick:function(){p({lat:"",lng:"",time:""})}}):null))))),l.a.createElement(U.a,null,l.a.createElement(de,{storeDetails:f})))):"Loading..."}var Ee=function(e){e.match;var t=Object(i.e)();"#_=_"===window.location.hash&&(t.replaceState?t.replaceState(null,null,window.location.href.split("#")[0]):window.location.hash="");var a=Object(n.useContext)(re),r=(a.usersInQueue,a.setUsersInQueue),c=Object(n.useContext)(h),s=Object(o.a)(c,2),u=s[0];return s[1],console.log("merchant home page"),Object(n.useEffect)((function(){w.a.get("/merchant/auth/login/success",{withCredentials:!0}).then((function(e){e.data.success?(console.log("response: ",e.data),e.data.usersInQueue.length>0?r(e.data.usersInQueue):r([])):t.push("/")})).catch((function(e){console.log(e)}))}),[]),l.a.createElement("div",null,l.a.createElement(I,null),u.status&&l.a.createElement(fe,null),l.a.createElement(S,null))};var be=function(){var e=Object(Y.a)(),t=e.register,a=e.watch,r=e.errors,c=e.handleSubmit,s=Object(i.e)(),u=Object(n.useState)(!1),m=Object(o.a)(u,2),d=m[0],p=m[1],g=Object(n.useState)(""),f=Object(o.a)(g,2),E=f[0],b=f[1],v=Object(n.useContext)(h),y=Object(o.a)(v,2),O=(y[0],y[1]);console.log("register");var j=function(e){console.log(e.currentTarget.value),b(e.currentTarget.value)};return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:c((function(e,t){"User"===E?w.a.post("/user/auth/register",e).then((function(e){e.data.status?(console.log("successful signup"),O({displayName:e.data.displayName,type:e.data.type,status:e.data.status}),s.push("/user/home/".concat(e.data.displayName))):p(!0)})).catch((function(e){console.error(e)})):w.a.post("/merchant/auth/register",e).then((function(e){e.data.status?(console.log("successful signup"),console.log("response: ",e.data),O({displayName:e.data.displayName,type:e.data.type,status:e.data.status}),s.push("/merchant/home/".concat(e.data.displayName))):p(!0)})).catch((function(e){console.error(e)})),console.log(e),t.preventDefault(),t.target.reset()}))},l.a.createElement("div",{className:"form-group"},l.a.createElement("div",{className:"card-body",style:{color:"white"}},l.a.createElement("h5",null,"Please select your catgeory:"),l.a.createElement("label",null,"User ","  ",l.a.createElement("input",{type:"radio",id:"User",name:"userType",value:"User",ref:t,onClick:j,required:!0})),l.a.createElement("label",{style:{paddingLeft:"1%"}},"Merchant ","  ",l.a.createElement("input",{type:"radio",id:"Merchant",name:"userType",value:"Merchant",ref:t,onClick:j})))),l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control",placeholder:"".concat(E," First Name"),name:"firstname",ref:t,required:!0})),l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control",placeholder:"".concat(E," Last Name"),name:"lastname",ref:t,required:!0})),l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"email",className:"form-control",placeholder:"Email",name:"username",ref:t})),l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"password",placeholder:"Password",className:"form-control",name:"password",ref:t({pattern:/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/}),required:!0}),r.password&&l.a.createElement("p",null,"Minimum eight characters, at least one letter and one number and a special character")),l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"password",className:"form-control",name:"cnfPassword",ref:t({validate:function(e){return e===a("password")}}),placeholder:"Confirm Password",required:!0}),r.cnfPassword&&l.a.createElement("p",null,"Passwords don't match")),l.a.createElement("button",{type:"submit",className:"btn btn-dark"},"Register"),d&&l.a.createElement("p",null," Sorry, email id already exists!")))};var ve=function(){var e=Object(Y.a)(),t=e.register,a=(e.watch,e.errors,e.handleSubmit),r=Object(i.e)(),c=Object(n.useState)(!1),s=Object(o.a)(c,2),u=s[0],m=s[1],d=Object(n.useState)(""),p=Object(o.a)(d,2),g=p[0],f=p[1],E=Object(n.useContext)(h),b=Object(o.a)(E,2),v=(b[0],b[1]);console.log("login tab");var y=function(e){console.log(e.currentTarget.value),f(e.currentTarget.value)};return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:a((function(e,t){"User"==g?w.a.post("/user/auth/login",e).then((function(e){e.data.authenticate?(console.log("response: ",e.data),v({displayName:e.data.displayName,type:e.data.type,status:e.data.authenticate}),r.push("/user/home/".concat(e.data.displayName))):m(!0)})).catch((function(e){console.error(e)})):w.a.post("/merchant/auth/login",e).then((function(e){e.data.authenticate?(console.log("response: ",e.data),v({displayName:e.data.displayName,type:e.data.type,status:e.data.authenticate}),r.push("/merchant/home/".concat(e.data.displayName))):m(!0)})).catch((function(e){console.error(e)})),t.preventDefault(),t.target.reset()}))},l.a.createElement("div",{className:"form-group"},l.a.createElement("div",{className:"card-body",style:{color:"white"}},l.a.createElement("h5",null,"Please select your catgeory:"),l.a.createElement("label",null,"User ","  ",l.a.createElement("input",{type:"radio",id:"User",name:"userType",value:"User",ref:t,onClick:y,required:!0})),l.a.createElement("label",{style:{paddingLeft:"1%"}},"Merchant ","  ",l.a.createElement("input",{type:"radio",id:"Merchant",name:"userType",value:"Merchant",ref:t,onClick:y})))),l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"email",className:"form-control",placeholder:"Email",name:"username",ref:t})),l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"password",placeholder:"Password",className:"form-control",name:"password",ref:t,required:!0})),l.a.createElement("button",{type:"submit",className:"btn btn-dark"},"Login"),u&&l.a.createElement("p",null,"Failed to login, please try again")))};var ye=function(){p()("container"),p()("btn","btn-block","btn-social","btn-google");var e=p()("nav","nav-tabs"),t=p()("nav-link","active");console.log("sign up");var a=Object(n.useState)(!1),r=Object(o.a)(a,2),c=r[0],s=r[1];return l.a.createElement("div",null,l.a.createElement(I,null),l.a.createElement("div",{style:{margin:"0",padding:"1%"},className:"container"},l.a.createElement("ul",{className:e},l.a.createElement("li",{className:"nav-item"},l.a.createElement("button",{onClick:function(){s(!1)},className:t},"Login")),l.a.createElement("li",{style:{paddingLeft:"0.5rem"},className:"nav-item"},l.a.createElement("button",{onClick:function(){s(!0)},className:"nav-link"},"Register"))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-6"},c?l.a.createElement("div",{style:{paddingTop:"2%"}},l.a.createElement(be,null)):l.a.createElement("div",null,l.a.createElement("div",{className:"card-body"},l.a.createElement(ve,null)))),l.a.createElement("div",{className:"col-sm-6"},l.a.createElement("div",{style:{color:"white"}},l.a.createElement("h1",{style:{textShadow:"2px 2px black"}},"Check Me In"),l.a.createElement("ul",null,l.a.createElement("h3",null,"Keep COVID-19 at a distance!"),l.a.createElement("ul",null,l.a.createElement("li",null,"During these times of pandemic, social distancing is essential"),l.a.createElement("li",null,"This app will help users find merchants near by and check-in to the digital queue"),l.a.createElement("li",null,"No more risk of overcrowding at places. No more standing in Queue!"),l.a.createElement("li",null," Click on Register to register yourself to get the most personalised experience"),l.a.createElement("li",null," Merchants - You can use this app to gauge the footfall in your establishment in real-time!"))))))),l.a.createElement(S,null))},Oe=a(24);Object(Oe.a)();function je(){console.log("show in queue");var e=Object(n.useContext)(re),t=e.usersInQueue,a=(e.setUsersInQueue,Object(n.useContext)(h)),r=Object(o.a)(a,2),c=r[0];r[1];return l.a.createElement("div",null,l.a.createElement(I,null),l.a.createElement("h1",{style:{color:"white"}}," Users in Queue are:"),c.status&&l.a.createElement(ne.a,{fluid:!0},l.a.createElement(L.a,null,t.map((function(e){return l.a.createElement(U.a,{sm:4},l.a.createElement(A.a,null,l.a.createElement(A.a.Header,null,"Name: ",e.displayName),l.a.createElement(A.a.Body,null,l.a.createElement(A.a.Text,null,"Check In Time: ",e.checkInDate))))})))))}function ke(){console.log("show in queue");var e=Object(n.useContext)(_),t=e.checkedInMerchants,a=(e.setCheckedInMerchants,Object(n.useContext)(h)),r=Object(o.a)(a,2),c=r[0];r[1];return l.a.createElement("div",null,l.a.createElement(I,null),l.a.createElement("h1",{style:{color:"white"}}," Merchants that you have checked in historically are:"),c.status&&l.a.createElement(ne.a,{fluid:!0},l.a.createElement(L.a,null,t.map((function(e){return l.a.createElement(U.a,{sm:4},l.a.createElement(A.a,null,l.a.createElement(A.a.Header,null,"Name: ",e.companyName),l.a.createElement(A.a.Body,null,l.a.createElement(A.a.Text,null,"Check In Time: ",e.checkInTime),l.a.createElement(A.a.Text,null,"Check In Position: ",e.position))))})))))}var Ce=function(){var e=Object(n.useContext)(h),t=Object(o.a)(e,2),a=t[0];return t[1],l.a.createElement("div",null,l.a.createElement(ce,null,l.a.createElement(T,null,l.a.createElement(x,null,l.a.createElement(R,null,l.a.createElement(s.a,null,!a.status&&l.a.createElement(i.a,{path:"/",exact:!0,component:ye}),a.status&&"user"===a.type&&l.a.createElement(i.a,{path:"/",exact:!0,component:le}),a.status&&"merchant"===a.type&&l.a.createElement(i.a,{path:"/",exact:!0,component:Ee}),l.a.createElement(i.a,{path:"/user/merchantDetails",exact:!0,component:ke}),l.a.createElement(i.a,{path:"/user/home/:userName",exact:!0,component:le}),l.a.createElement(i.a,{path:"/merchant/userDetails",exact:!0,component:je}),l.a.createElement(i.a,{path:"/merchant/home/:userName",exact:!0,component:Ee})))))))};a(205),a(206);c.a.render(l.a.createElement(g,null,l.a.createElement(Ce,null)),document.getElementById("root"))},73:function(e,t,a){e.exports=a.p+"static/media/logo2.df7cc3c4.png"},82:function(e,t,a){e.exports=a.p+"static/media/compass.91027ed7.jpg"}},[[148,1,2]]]);
//# sourceMappingURL=main.b15b0680.chunk.js.map